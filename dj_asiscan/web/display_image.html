<!DOCTYPE html>
<html>
<head>
    <title>WebSocket Image Display</title>
</head>
<body>
    <h1>Display Image from WebSocket</h1>
    <img id="image" src="" alt="Received Image" style="max-width: 100%; height: auto;">
    <script>
        const imageElement = document.getElementById("image");
        const ws = new WebSocket('ws://127.0.0.1:8000/ws/camera/');

        ws.onopen = function(event) {
            console.log("WebSocket connection established.");
        };

        ws.onmessage = function(event) {
            console.log("Message received from server.");
            const data = JSON.parse(event.data);
            const imgBase64 = data.img_base64;
            imageElement.src = `data:image/jpeg;base64,${imgBase64}`;
        };

        ws.onerror = function(event) {
            console.error("WebSocket error:", event);
        };

        ws.onclose = function(event) {
            console.log("WebSocket connection closed:", event);
        };
    </script>
</body>
</html>
